---
title: "Assignment 2 - Airbnb prediction models"
subtitle: "Course: ECBS6067 - Prediction with Machine Learning for Economists"
author: "Anne Valder"
date: "2023-12-02"
output:
  pdf_document: default
  html_document:
  df_print: paged
---

# CHat GPT Link:
# https://chat.openai.com/share/c7ed8e6b-ffa8-46f0-97e4-672bff890d60

```{r setup, echo=FALSE}
knitr::opts_chunk$set(echo = TRUE)
knitr::opts_knit$set(root.dir = 'C:/Users/avalder/OneDrive - WU Wien/Documents/Study/WS_23_24/Pred_MLE_Econ/da_case_studies')
```

```{r,include=FALSE}
# Clear memory
rm(list=ls())
```

```{r, echo=FALSE, include=FALSE}
# Set directory, load functions and theme 
getwd()
source("set-data-directory.R")
source("ch00-tech-prep/theme_bg.R")
source("ch00-tech-prep/da_helper_functions.R")

```
 

```{r, echo=FALSE, include=FALSE}
# Load data 
# Copenhagen 24 September, 2023 
listings <- read.csv(paste0(data_dir,"/airbnb/assignment/listings_cph.csv"), sep = ",", header = T, stringsAsFactors = F)

#Dates? For task 2 
#calender <- read.csv(paste0(data_dir,"/airbnb/assignment/calendar_cph.csv"), sep = ",", header = T, stringsAsFactors = F)

#reviews <- read.csv(paste0(data_dir,"/airbnb/assignment/reviews_cph.csv"), sep = ",", header = T)

use_case_dir <- "A2/"
data_out <- use_case_dir
```

# Sample Design:
```{r, echo=FALSE, include=FALSE}
# Clean data set:

## drop all variables in listings file that are redundant, lots of url variables or descriptive, or host related variables.

drop_variables <- c("host_thumbnail_url","host_picture_url","listing_url","picture_url","host_url","last_scraped","description", "neighborhood_overview", "host_about", "host_response_time", "name", "host_location","neighbourhood_group_cleansed","source","license","calendar_updated") # drop similar variables to airbnb_london_cleaner.R. Either not needed or oly contrains NAs..

# add source? 
listings <- listings %>% select(-drop_variables)

# check if id variables contain at least one alphabetical character, if yes drop those

listings$junk<-grepl("[[:alpha:]]", listings$id)
summary(as.factor(listings$junk))
listings <-subset(listings,junk==FALSE)
listings <- listings %>% select(-junk) 

# check all classes and variabley types of data set listings
#sapply(listings, class)
#sapply(listings, typeof)
```

```{r, echo=FALSE, include=FALSE}
### Adjustment "within" columns/ variables:
#remove percentage signs
#remove dollar signs 

remove_symbols <- function(x) {
  #remove either dollar sign or percentage sign
  value_clean <-  gsub("[$%]", "", x)
  # convert value to numeric
   if (length(value_clean) > 1) {
    return(value_clean)
  } else {
    return(as.numeric(value_clean))
  }
}

# apply the function to all columns in the data frame

listings_clean <- listings %>% mutate_all(.funs = remove_symbols)

#format binary variables
# function to convert "f" and "t" to 0 and 1
convert_binary <- function(x) {
  ifelse(toupper(x) == "T", 1, ifelse(toupper(x) == "F", 0, x))
}

# apply the function to all columns in the data frame
listings_clean <- listings_clean %>%
  mutate_all(.funs = convert_binary)
```


```{r, echo=FALSE, include=FALSE}
### Amenities still not working correctly !! (4 rows entertainment only, cannot be true)
# create dummies for amenities

# works but to detailed would create over 2000 variables...
#listings_clean_am <- listings_clean %>%
 # mutate(amenities = gsub("[^a-zA-Z,]", " ", gsub("[0-9]", "", gsub("\\\\", "", gsub("\xe2\x80\x93", "", amenities)))),
    #     amenities = str_replace_all(amenities, "\\s+", " "),
    #     amenities = gsub("\\s*,\\s*", ",", amenities))


#listings_clean_am$amenities<-as.list(strsplit(listings_clean_am$amenities, ","))

#define levels and dummies 
#levs <- levels(factor(unlist(listings_clean_am$amenities)))
#listings_clean_test<-cbind(listings_clean_am,as.data.frame(do.call(rbind, lapply(lapply(listings_clean$amenities, factor, levs), table))))
#head(levs)


# therefore group manually most important ones 


# Extract amenities from the text and create dummy variables
extract_and_group_amenities <- function(data) {
  data %>%
    mutate(amenities = gsub('\\[|\\]|"', '', amenities)) %>%
    separate_rows(amenities, sep = ',\\s*') %>%
    mutate(amenities = trimws(amenities)) %>%
    # Remove strings starting with "\u" in the amenities column
    mutate(amenities = gsub('^\\\\u.*', '', amenities)) %>%
    filter(amenities != "") %>%  # Remove empty strings after removal
    mutate(amenity_type = case_when(
      grepl("Wifi", amenities) ~ "a_Internet",
      grepl("Washer|Dryer|Laundromat nearby|Drying rack for clothing|Iron", amenities) ~ "a_Laundry",
      grepl("Kitchen|Microwave|Refrigerator|Dishes and silverware|Toaster|Freezer|Stove|Oven|Cooking basics", amenities) ~ "a_Kitchen",
      grepl("Espresso machine|French press|Hot water|Coffee maker: pour-over coff#ee", amenities) ~ "a_TeaCoffee",
      grepl("Heating", amenities) ~ "a_Heating",
      grepl("Pets allowed", amenities) ~ "a_Petfriendly",
      grepl("Parking|Paid street parking off premises", amenities) ~ "a_Parking",
      grepl("Balcony|Outdoor furniture|Backyard|Private patio or balcony", amenities) ~ "a_OutdoorArea",
      grepl("Soap|Shampoo|Hair dryer|Shower gel|Body soap|Conditioner", amenities) ~ "a_Toiletry",
      grepl("TV with standard cable|TV|Netflix|Disney+|Chromecast|HBO Max|sound system|Bluetooth", amenities) ~ "a_Entertainment",
      grepl("Changing table|High chair|Baby bath", amenities) ~ "a_Childfriendly",
      grepl("Dedicated workspace", amenities) ~ "a_HomeOffice",
      grepl("Long term stays allowed", amenities) ~ "a_LongTermStay",
      grepl("Self check-in|Keypad", amenities) ~ "a_Selfcheckin",
      grepl("Smoke alarm", amenities) ~ "a_Security",
      grepl("cats", amenities) ~ "a_cats",
      grepl("dogs", amenities) ~ "a_dogs",
      TRUE ~ "Other_Group"
    )) %>%
    pivot_wider(names_from = amenity_type, values_from = amenities, values_fn = length, values_fill = 0) %>%
    mutate(across(starts_with("a_"), ~ifelse(. > 0, 1, 0)))
}

listings_clean <- extract_and_group_amenities(listings_clean)
# kind of drops amenities column automatically by storing into "other_group"
```


### Sample design- policy question related sample

```{r, echo=FALSE, include=FALSE}
# add new numeric columns from certain columns

vars_to_convert <- c("host_id","id","scrape_id","maximum_nights","minimum_nights","accommodates","bathrooms","review_scores_rating","number_of_reviews","reviews_per_month","beds","host_is_superhost","host_listings_count","host_total_listings_count","host_has_profile_pic","host_identity_verified","latitude","longitude","minimum_minimum_nights","maximum_minimum_nights","minimum_maximum_nights","maximum_maximum_nights","minimum_nights_avg_ntm","maximum_nights_avg_ntm","has_availability","availability_30","availability_60","availability_90", "availability_365","number_of_reviews", "bedrooms")

listings_clean <- listings_clean %>% 
    mutate(across(all_of(vars_to_convert), as.numeric))

## filter n accommodate 2-6 according to policy question 
summary(as.factor(listings_clean$accommodates))
listings_clean <- listings_clean %>%
  filter(accommodates >= 2 & accommodates <= 6 )

# Some of the input values are improperly formatted due to the presence of commas (i.e.,) between the numbers.Using the gsub function, we can remove these commas.
listings_clean <- listings_clean %>% 
  mutate(price_n = gsub(",", "", price),
         price_n = as.numeric(price_n))

# keep Airbnbs with price info only
summary(listings_clean$price_n)
listings_clean <- listings_clean %>%
  drop_na(price)

# drop extreme values in terms of price
summary(listings_clean$price_n)
# min is 75 DKK which is approx 10EUR and max is 150368DKK which is 20166,60 EUR
# Drop everything above 15000DKK (i.e. 2000EUR) 
listings_clean <- listings_clean %>% 
  filter(price_n <=  15000) %>% 
  mutate(price_ln = log(price_n))

# drop extreme values in terms of duration?
# filter min night at least 1 to delte errors
listings_clean <- listings_clean %>% 
    filter(minimum_nights <= 7 & minimum_nights >= 1)

# keep if only certain "standard" property types for representative Airbnb prices (probably extra cost for special Airbnbs like Boats etc.)
summary(as.factor(listings_clean$property_type))

listings_clean <- listings_clean %>%
  mutate(f_property_type = factor(property_type)) %>%
  filter(!f_property_type %in% c("Barn", "Entire cabin","Boat","Hut","Private room in boat","Dome","Farm 
                               stay","Private room in castle","Private room in hut","Camper/RV","Houseboat","Private
                               room in cabin"))

#Room type as factor
table(listings_clean$room_type)
listings_clean <- listings_clean %>%
  mutate(f_room_type = factor(room_type))

# Rename room type because it is too long
listings_clean$f_room_type2 <- factor(ifelse(listings_clean$f_room_type== "Entire home/apt", "Entire/Apt",
                            ifelse(listings_clean$f_room_type== "Private room", "Private",
                                   ifelse(listings_clean$f_room_type== "Shared room", "Shared", "."))))

# no cancellation policy variable 

#create days since first review
listings_clean <- listings_clean %>%
  mutate(
    n_days_since = as.numeric(as.Date(calendar_last_scraped,format="%Y-%m-%d") -
                                as.Date(first_review ,format="%Y-%m-%d")))

summary(listings_clean)
```

 
### Label engineering
- log price or not look at each distribution also boxplots here already? 
```{r, echo=FALSE, include=FALSE}
p1_lnprice <- ggplot(listings_clean, aes(price_ln)) +
  geom_histogram(binwidth = 0.15, fill = color[1], color = color.outline, alpha = 0.8, size = 0.25) +
  ylab("Count") +
  xlab("Log price") +
  theme_bg()
p1_lnprice


summary(listings_clean$price_n)

p2_price <- ggplot(listings_clean, aes(price_n)) +
  geom_histogram(fill = color[1], color = color.outline, alpha = 0.8, size = 0.25) +
  ylab("count") +
  xlab("Price") +
  ggplot2::xlim(c(0,5000))+
  theme_bg()
p2_price
```


```{r, echo=FALSE, include=FALSE}
### boxplots
## Boxplot of price by room type
summary(as.factor(listings_clean$f_room_type))

p3_roomtype <- ggplot(data = listings_clean, aes(x = f_room_type, y = price_n)) +
  stat_boxplot(aes(group = f_room_type), geom = "errorbar", width = 0.3,
               color = c(color[2],color[1], color[3], color[4]), size = 0.5, na.rm=T)+
  geom_boxplot(aes(group = f_room_type),
               color = c(color[2],color[1], color[3], color[4]), fill = c(color[2],color[1], color[3], color[4]),
               size = 0.5, width = 0.6, alpha = 0.3, na.rm=T, outlier.shape = NA) +
  scale_y_continuous(expand = c(0.01,0.01),limits = c(0,2500), breaks = seq(0,2500,500)) +
  labs(x = "Room type",y = "Price (DKK)")+
  theme_bg()
p3_roomtype

# Boxplot accomodates and price

summary(as.factor(listings_clean$accommodates))

p4_accomdates <- ggplot(listings_clean, aes(x = factor(accommodates), y = price_n))+
 geom_boxplot(aes(group = accommodates),
               color = c(color[2],color[1], color[3], color[4],color[5]), fill = c(color[2],color[1], color[3], color[4],color[5] ),
               size = 0.3, width = 0.8, alpha = 0.3, na.rm=T, outlier.shape = NA)  +
     stat_boxplot(aes(group = accommodates), geom = "errorbar", width = 0.8,
               color = c(color[2],color[1], color[3], color[4],color[5] ), size = 0.5, na.rm=T)+
    scale_color_manual(name="",
                     values=c(color[2],color[1],color[1],color[2],color[1],color[2])) +
  scale_fill_manual(name="",
                     values=c(color[2],color[1],color[3],color[4],color[1],color[2])) +
  labs(x = "Accomodates (Persons)",y = "Price (DKK)")+
  scale_y_continuous(expand = c(0.01,0.01), limits=c(0, 3500), breaks = seq(0,3500, 500))+
  theme_bg() +
  theme(legend.position = c(0.3,0.8)        )
p4_accomdates

```

### Feature engineering
# look at some cnts. key vars, functional form #
# missing values
# interaction
# functional form overall

```{r, echo=FALSE, include=FALSE}
# where do we have missing variables now?
to_filter <- sapply(listings_clean, function(x) sum(is.na(x)))
to_filter[to_filter > 0]

# calender updated and license NAs, dropped beginning, drop columns when many missing not imortant

# NAs bathroom use bathrroms_text
listings_clean <- listings_clean %>%
  mutate(bathrooms = as.numeric(str_extract(bathrooms_text, "\\d+\\.?\\d*")),
         shared_bathroom = as.integer(str_detect(bathrooms_text, "shared")))


# bedroom many NAs - use number of beds or impute from number of bed, sth like if bed = 1 than put 1, either remain NA than check again number NAs 
listings_clean <- listings_clean %>%
  mutate(bedrooms = if_else(beds %in% c(1, 2), 1, bedrooms)) %>%
  filter(bedrooms < 15) # there was one error 15 bedrooms 5 beds.

listings_clean <- listings_clean %>%
  mutate(
    beds = if_else(is.na(beds) & !is.na(bedrooms), bedrooms, beds),
    beds = if_else(is.na(beds) & is.na(bedrooms) & accommodates %in% c(1, 2), 1,
                   if_else(is.na(beds) & is.na(bedrooms) & accommodates > 2, 2, beds)),
    bedrooms = if_else(is.na(bedrooms) & is.na(beds) & accommodates %in% c(1, 2), 1,
                       if_else(is.na(bedrooms) & is.na(beds) & accommodates > 2, 2, bedrooms))
  )

# 2. imput when few, not that important
listings_clean <- listings_clean %>%
  mutate(
    bathrooms =  ifelse(is.na(bathrooms), median(bathrooms, na.rm = T), bathrooms)) #assume at least 1 bath


# 4. Replace missing variables re reviews with zero, when no review + add flags
listings_clean <- listings_clean %>%
  mutate(
    flag_days_since=ifelse(is.na(n_days_since),1, 0),
    n_days_since =  ifelse(is.na(n_days_since), median(n_days_since, na.rm = T), n_days_since),
    flag_review_scores_rating=ifelse(is.na(review_scores_rating),1, 0),
    review_scores_rating =  ifelse(is.na(review_scores_rating), median(review_scores_rating, na.rm = T), review_scores_rating),
    flag_reviews_per_month=ifelse(is.na(reviews_per_month),1, 0),
    reviews_per_month =  ifelse(is.na(reviews_per_month), median(reviews_per_month, na.rm = T), reviews_per_month)
          )

# where do we have missing variables now?
to_filter <- sapply(data, function(x) sum(is.na(x)))
to_filter[to_filter > 0]

```

### Feature engineering (functional forms)
```{r, echo=FALSE, include=FALSE}
################################################
# look key vars, functional form #
################################################
## accomodates: look at distribution

summary(as.factor(listings_clean$accommodates))

listings_clean %>%
  group_by(accommodates) %>%
  summarise(mean_price = mean(price_n), min_price= min(price_n), max_price = max(price_n), n = n())

p5_accommodates <- ggplot(data = listings_clean, aes(x=accommodates, y=price_n)) +
  geom_point(size=1, colour=color[3], shape=16)+
  labs(x="Number of people accomodated",y="Price")+
  geom_smooth(method="lm", colour=color[1], se=FALSE)+
  theme_bg()

p5_accommodates

# Squares and further values to create
listings_clean <- listings_clean %>%
  mutate(accommodates2=accommodates^2, ln_accommodates=log(accommodates) ,
         ln_accommodates2=log(accommodates)^2)

# Regression 1: ln price and num of accomodates and squares
summary(lm(price_ln ~ accommodates + accommodates2, data=listings_clean))
# Regression 2: ln price and log num of accomodates
summary(lm(price_ln ~ ln_accommodates , data=listings_clean))
# Regression 3: ln price and num of accomodates
summary(lm(price_ln ~ accommodates, data=listings_clean))


## Beds
listings_clean %>%
  group_by(beds) %>%
  summarise(mean_price = mean(price_n), min_price= min(price_n), max_price = max(price_n), n = n())
# maybe best is to have log beds
listings_clean <- listings_clean %>%
  mutate(ln_beds = log(beds))

## bathrooms
ggplot(listings_clean, aes(bathrooms)) +
  geom_histogram(binwidth = 0.5, fill = color[1], color = color.outline, alpha = 0.8, size = 0.25) +
  ylab("") +
  xlab("N of bathrooms") +
  theme_bg()

## Number of reviews
nreview_plot <- listings_clean %>%
  filter(number_of_reviews <100)

ggplot(nreview_plot, aes(number_of_reviews)) +
  geom_histogram(binwidth = 5, fill = color[1], color = color.outline, alpha = 0.8, size = 0.25) +
  ylab("") +
  xlab("N of reviews") +
  theme_bg()

# number of reviews: use logs as well
listings_clean <- listings_clean %>%
  mutate(ln_number_of_reviews = log(number_of_reviews+1))

ggplot(listings_clean, aes(ln_number_of_reviews)) +
  geom_histogram(binwidth = 0.5, fill = color[1], color = color.outline, alpha = 0.8, size = 0.25) +
  ylab("") +
  xlab("Log N of reviews") +
  theme_bg()

## Time since
# Create variables, measuring the time since: squared, cubic, logs
# redo features
# Create variables, measuring the time since: squared, cubic, logs
listings_clean <- listings_clean %>%
  mutate(
    ln_days_since = log(n_days_since+1),
    ln_days_since2 = log(n_days_since+1)^2,
    ln_days_since3 = log(n_days_since+1)^3 ,
    n_days_since2=n_days_since^2,
    n_days_since3=n_days_since^3,
    ln_review_scores_rating = log(review_scores_rating),
    ln_days_since=ifelse(is.na(ln_days_since),0, ln_days_since),
    ln_days_since2=ifelse(is.na(ln_days_since2),0, ln_days_since2),
    ln_days_since3=ifelse(is.na(ln_days_since3),0, ln_days_since3),
  )


# Check the effect
p6_lndays <- listings_clean %>%
  filter(listings_clean$price_n<=15000, ln_days_since>2)

skimr::skim(listings_clean$n_number_of_reviews)
ggplot(data = listings_clean, aes(x=number_of_reviews , y=price_n)) +
  geom_point(size=1.5, colour=color[3], shape=4) +
  geom_smooth(method="loess", colour=color[1], se=F)+
  labs(x="Log number of days since first review",y="Log daily price")+
  theme_bg()


#-Inf values
#lm(ln_price ~ ln_days_since + ln_days_since2 + ln_days_since3, data=data)

## review score effect
ggplot(data = listings_clean, aes(x=review_scores_rating , y=price_n)) +
  geom_point(size=1.5, colour=color[3], shape=4) +
#  ylim(0,800)+
 # xlim(20,100)+
  geom_smooth(method="loess", colour=color[1], se=F)+
  labs(x="Review score",y="Daily price (USD)")+
  theme_bg()

# Create log of review scores
#listings_clean <- listings_clean %>%
 # mutate(ln_review_scores_rating = log(review_scores_rating))
# Regression 1) ln price - num of review scores
summary(lm(price_ln ~ review_scores_rating,data=listings_clean))
# Regression 2) ln price - log num of review scores
#summary(lm(price_ln ~ ln_review_scores_rating,data=listings_clean))
#leave as is

```
### Feature engineering (interactions)
# fix amenities first 
```{r, echo=FALSE, include=FALSE}

#################################################
# Look for interactions
################################################
#Look up room type interactions
p1 <- price_diff_by_variables2(listings_clean, "f_room_type", "a_Childfriendly", "Room type")

p2 <- price_diff_by_variables2(listings_clean, "f_room_type", "f_property_type", "Room type", "Property type")
#Look up canelation policy
#p3 <- price_diff_by_variables2(listings_clean, "f_cancellation_policy", "d_familykidfriendly", "Cancellation policy", "Family kid friendly")
#p4 <- price_diff_by_variables2(listings_clean, "f_cancellation_policy", "d_tv", "Cancellation policy", "TV")
#Look up property type
p5 <- price_diff_by_variables2(listings_clean, "f_property_type", "a_cats", "Property type", "Cats")
p6 <- price_diff_by_variables2(listings_clean, "f_property_type", "a_dogs", "Property type", "Dogs")

g_interactions <- plot_grid(p1, p2, p3, p4, p5, p6, nrow=3, ncol=2)
g_interactions


# dummies suggested by graphs
X1  <- c("f_room_type*f_property_type",  "f_room_type*d_familykidfriendly")

# Additional interactions of factors and dummies
X2  <- c("d_airconditioning*f_property_type", "d_cats*f_property_type", "d_dogs*f_property_type")
X3  <- c(paste0("(f_property_type + f_room_type + f_cancellation_policy + f_bed_type) * (",
                paste(amenities, collapse=" + "),")"))

```
```{r, echo=FALSE, include=FALSE}
write.csv(listings_clean, paste0(data_out, "airbnb_cph_work_book.csv"), row.names = F)
```


### Descriptives of final data set

```{r, echo=FALSE, include=FALSE}

N=nrow(listings_clean)

#####################################
# Look at some descriptive statistics
#####################################

#How is the average price changing in my district by `property_type`, `room_type` and the `bed_type`?
listings_clean %>%
  group_by(f_property_type, f_room_type) %>%
  dplyr::summarize(mean_price = mean(price_n, na.rm=TRUE))


Hmisc::describe(listings_clean$price_n)
```

### seperate data into holdout and work data set  

```{r, echo=FALSE, include=FALSE}
# create a holdout set (20% of observations)
smp_size <- floor(0.2 * nrow(listings_clean))

# Set the random number generator
set.seed(123456)

# create ids:
# 1) seq_len: generate regular sequences
# 2) sample: select random rows from a table
holdout_ids <- sample(seq_len(nrow(listings_clean)), size = smp_size)
listings_clean$holdout <- 0
listings_clean$holdout[holdout_ids] <- 1

#Hold-out set Set
data_holdout <- listings_clean %>% filter(holdout == 1)

#Working data set
data_work <- listings_clean %>% filter(holdout == 0)

# see slide 56 again 
# use only ~80% as working data, rest is hold ou
# Split These 80% again into train and test (80/20)?
```

### seperate data into train and test data set  

```{r}

```

ä### set up models:


TODO:

train and test
look up LASSO old files
amenities code!!! für itneractions

```{r, echo=FALSE, include=FALSE}
#Model 1: OLS(very similar to M7 vom slides singe this model was best in Terms of RMSE (test)). Use as external validity check & also try model 8 compar and Choose best

# Dp LASSO TO "SKIP" Modelling choice 


# Set lasso tuning parameters
n_folds = 5
train_control <- trainControl(method = "cv", number = n_folds)

tune_grid <- expand.grid("alpha" = c(1), "lambda" = seq(0.05, 1, by = 0.05))

# change! LAssO over all variables? 
formula <- formula(paste0("price_n ~ ", paste(setdiff(vars_model_8, "price_n"), collapse = " + ")))



```




```{r, echo=FALSE, include=FALSE}
# Model 2: Random forest or Boosting 

# Model 3: Choose freely - Lasso? Or Boosting / RF bot Chosen so far
#model_result_plot_levels
```

# Task 1
## • Business Your task will be to help a company operating small and mid size apartments hosting 2 6 guests . The company is set to price their new apartments not on the market.
## • Pick a city you will operate in.
## • Build a price prediction model similarly to how we did in our case study for London.
## • Discuss your modeling decisions and compare your results to those of the case study.

### • You may use other variables we used in class,
### • You may do different feature engineering
### • You may make other sample design decisions
### • But document your steps
### • Have 3 different models and compare performance
### • Argue for your choice of models
### • One model must be OLS another must Random Forest or any boosting algorithm , the third could be either or stg different

```{r, echo=FALSE, include=FALSE}
# target variables prices - take log? look at distributions 

```

# Tasks 2
## • Please pick two dates , one before and one after lockdowns in that city.
## • Carry out the exercise before the lockdown
## • Take your selected model and use it on the post lockdown date
## • Compare the predictive power of the model . Discuss briefly in the report


```{r, echo=FALSE, include=FALSE}
# get other older data set from inside Airbnb e.g.
# 29 December, 2022

```

# Tasks 3
## • Consider your ML model (RF or Boosting
## • Explain features ’ contribution to predicted values on average , using Shapley values
## • You shall use a SHAP method
## • You may use graphs , but the emphasis is on the discussion part.
## • This is worth relatively few points , do it only if everything else is already done

### extra add: graph on cv rmse